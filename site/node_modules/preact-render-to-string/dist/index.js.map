{"version":3,"file":null,"sources":["../src/util.js","../src/index.js"],"sourcesContent":["// DOM properties that should NOT have \"px\" added when numeric\nexport const NON_DIMENSION_PROPS = {\n\tboxFlex:1, boxFlexGroup:1, columnCount:1, fillOpacity:1, flex:1, flexGrow:1,\n\tflexPositive:1, flexShrink:1, flexNegative:1, fontWeight:1, lineClamp:1, lineHeight:1,\n\topacity:1, order:1, orphans:1, strokeOpacity:1, widows:1, zIndex:1, zoom:1\n};\n\nconst ESC = {\n\t'<': '&lt;',\n\t'>': '&gt;',\n\t'\"': '&quot;',\n\t'&': '&amp;'\n};\n\nexport const objectKeys = Object.keys || (obj => {\n\tlet keys = [];\n\tfor (let i in obj) if (obj.hasOwnProperty(i)) keys.push(i);\n\treturn keys;\n});\n\nexport let encodeEntities = s => String(s).replace(/[<>\"&]/g, escapeChar);\n\nlet escapeChar = a => ESC[a] || a;\n\nexport let falsey = v => v==null || v===false;\n\nexport let memoize = (fn, mem={}) => v => mem[v] || (mem[v] = fn(v));\n\nexport let indent = (s, char) => String(s).replace(/(\\n+)/g, '$1' + (char || '\\t'));\n\nexport let isLargeString = (s, length, ignoreLines) => (String(s).length>(length || 40) || (!ignoreLines && String(s).indexOf('\\n')!==-1) || String(s).indexOf('<')!==-1);\n\n// Convert an Object style to a CSSText string\nexport function styleObjToCss(s) {\n\tlet str = '';\n\tfor (let prop in s) {\n\t\tlet val = s[prop];\n\t\tif (val!=null) {\n\t\t\tif (str) str += ' ';\n\t\t\tstr += jsToCss(prop);\n\t\t\tstr += ': ';\n\t\t\tstr += val;\n\t\t\tif (typeof val==='number' && !NON_DIMENSION_PROPS[prop]) {\n\t\t\t\tstr += 'px';\n\t\t\t}\n\t\t\tstr += ';';\n\t\t}\n\t}\n\treturn str || undefined;\n}\n\n\n// See https://github.com/developit/preact/blob/master/src/util.js#L61\nexport function hashToClassName(c) {\n\tlet str = '';\n\tfor (let prop in c) {\n\t\tif (c[prop]) {\n\t\t\tif (str) str += ' ';\n\t\t\tstr += prop;\n\t\t}\n\t}\n\treturn str;\n}\n\n// Convert a JavaScript camel-case CSS property name to a CSS property name\nexport let jsToCss = memoize( s => s.replace(/([A-Z])/g,'-$1').toLowerCase() );\n\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn obj;\n}\n\nexport function getNodeProps(vnode) {\n\tlet defaultProps = vnode.nodeName.defaultProps,\n\t\tprops = assign({}, defaultProps || vnode.attributes);\n\tif (defaultProps) assign(props, vnode.attributes);\n\tif (vnode.children) props.children = vnode.children;\n\treturn props;\n}\n","import { objectKeys, encodeEntities, falsey, memoize, indent, isLargeString, styleObjToCss, hashToClassName, assign, getNodeProps } from './util';\n\nconst SHALLOW = { shallow: true };\n\n// components without names, kept as a hash for later comparison to return consistent UnnamedComponentXX names.\nconst UNNAMED = [];\n\nconst EMPTY = {};\n\nconst VOID_ELEMENTS = [\n\t'area',\n\t'base',\n\t'br',\n\t'col',\n\t'embed',\n\t'hr',\n\t'img',\n\t'input',\n\t'link',\n\t'meta',\n\t'param',\n\t'source',\n\t'track',\n\t'wbr'\n];\n\n\n/** Render Preact JSX + Components to an HTML string.\n *\t@name render\n *\t@function\n *\t@param {VNode} vnode\tJSX VNode to render.\n *\t@param {Object} [context={}]\tOptionally pass an initial context object through the render path.\n *\t@param {Object} [options={}]\tRendering options\n *\t@param {Boolean} [options.shallow=false]\tIf `true`, renders nested Components as HTML elements (`<Foo a=\"b\" />`).\n *\t@param {Boolean} [options.xml=false]\t\tIf `true`, uses self-closing tags for elements without children.\n *\t@param {Boolean} [options.pretty=false]\t\tIf `true`, adds whitespace for readability\n */\nrenderToString.render = renderToString;\n\n\n/** Only render elements, leaving Components inline as `<ComponentName ... />`.\n *\tThis method is just a convenience alias for `render(vnode, context, { shallow:true })`\n *\t@name shallow\n *\t@function\n *\t@param {VNode} vnode\tJSX VNode to render.\n *\t@param {Object} [context={}]\tOptionally pass an initial context object through the render path.\n */\nlet shallowRender = (vnode, context) => renderToString(vnode, context, SHALLOW);\n\n\n/** The default export is an alias of `render()`. */\nexport default function renderToString(vnode, context, opts, inner, isSvgMode) {\n\tlet { nodeName, attributes, children } = vnode || EMPTY,\n\t\tisComponent = false;\n\tcontext = context || {};\n\topts = opts || {};\n\n\tlet pretty = opts.pretty,\n\t\tindentChar = typeof pretty==='string' ? pretty : '\\t';\n\n\tif (vnode==null || typeof vnode==='boolean') {\n\t\treturn '';\n\t}\n\n\t// #text nodes\n\tif (typeof vnode!=='object' && !nodeName) {\n\t\treturn encodeEntities(vnode);\n\t}\n\n\t// components\n\tif (typeof nodeName==='function') {\n\t\tisComponent = true;\n\t\tif (opts.shallow && (inner || opts.renderRootComponent===false)) {\n\t\t\tnodeName = getComponentName(nodeName);\n\t\t}\n\t\telse {\n\t\t\tlet props = getNodeProps(vnode),\n\t\t\t\trendered;\n\n\t\t\tif (!nodeName.prototype || typeof nodeName.prototype.render!=='function') {\n\t\t\t\t// stateless functional components\n\t\t\t\trendered = nodeName(props, context);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// class-based components\n\t\t\t\tlet c = new nodeName(props, context);\n\t\t\t\t// turn off stateful re-rendering:\n\t\t\t\tc._disable = c.__x = true;\n\t\t\t\tc.props = props;\n\t\t\t\tc.context = context;\n\t\t\t\tif (c.componentWillMount) c.componentWillMount();\n\t\t\t\trendered = c.render(c.props, c.state, c.context);\n\n\t\t\t\tif (c.getChildContext) {\n\t\t\t\t\tcontext = assign(assign({}, context), c.getChildContext());\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn renderToString(rendered, context, opts, opts.shallowHighOrder!==false);\n\t\t}\n\t}\n\n\t// render JSX to HTML\n\tlet s = '', html;\n\n\tif (attributes) {\n\t\tlet attrs = objectKeys(attributes);\n\n\t\t// allow sorting lexicographically for more determinism (useful for tests, such as via preact-jsx-chai)\n\t\tif (opts && opts.sortAttributes===true) attrs.sort();\n\n\t\tfor (let i=0; i<attrs.length; i++) {\n\t\t\tlet name = attrs[i],\n\t\t\t\tv = attributes[name];\n\t\t\tif (name==='children') continue;\n\t\t\tif (!(opts && opts.allAttributes) && (name==='key' || name==='ref')) continue;\n\n\t\t\tif (name==='className') {\n\t\t\t\tif (attributes['class']) continue;\n\t\t\t\tname = 'class';\n\t\t\t}\n\t\t\telse if (isSvgMode && name.match(/^xlink\\:?(.+)/)) {\n\t\t\t\tname = name.toLowerCase().replace(/^xlink\\:?(.+)/, 'xlink:$1');\n\t\t\t}\n\n\t\t\tif (name==='class' && v && typeof v==='object') {\n\t\t\t\tv = hashToClassName(v);\n\t\t\t}\n\t\t\telse if (name==='style' && v && typeof v==='object') {\n\t\t\t\tv = styleObjToCss(v);\n\t\t\t}\n\n\t\t\tlet hooked = opts.attributeHook && opts.attributeHook(name, v, context, opts, isComponent);\n\t\t\tif (hooked || hooked==='') {\n\t\t\t\ts += hooked;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (name==='dangerouslySetInnerHTML') {\n\t\t\t\thtml = v && v.__html;\n\t\t\t}\n\t\t\telse if ((v || v===0 || v==='') && typeof v!=='function') {\n\t\t\t\tif (v===true || v==='') {\n\t\t\t\t\tv = name;\n\t\t\t\t\t// in non-xml mode, allow boolean attributes\n\t\t\t\t\tif (!opts || !opts.xml) {\n\t\t\t\t\t\ts += ' ' + name;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ts += ` ${name}=\"${encodeEntities(v)}\"`;\n\t\t\t}\n\t\t}\n\t}\n\n\t// account for >1 multiline attribute\n\tlet sub = s.replace(/^\\n\\s*/, ' ');\n\tif (sub!==s && !~sub.indexOf('\\n')) s = sub;\n\telse if (pretty && ~s.indexOf('\\n')) s += '\\n';\n\n\ts = `<${nodeName}${s}>`;\n\n\tif (VOID_ELEMENTS.indexOf(nodeName)>-1) {\n\t\ts = s.replace(/>$/, ' />');\n\t}\n\n\tif (html) {\n\t\t// if multiline, indent.\n\t\tif (pretty && isLargeString(html)) {\n\t\t\thtml = '\\n' + indentChar + indent(html, indentChar);\n\t\t}\n\t\ts += html;\n\t}\n\telse {\n\t\tlet len = children && children.length,\n\t\t\tpieces = [],\n\t\t\thasLarge = ~s.indexOf('\\n');\n\t\tfor (let i=0; i<len; i++) {\n\t\t\tlet child = children[i];\n\t\t\tif (!falsey(child)) {\n\t\t\t\tlet childSvgMode = nodeName==='svg' ? true : nodeName==='foreignObject' ? false : isSvgMode,\n\t\t\t\t\tret = renderToString(child, context, opts, true, childSvgMode);\n\t\t\t\tif (!hasLarge && pretty && isLargeString(ret)) hasLarge = true;\n\t\t\t\tif (ret) pieces.push(ret);\n\t\t\t}\n\t\t}\n\t\tif (pretty && hasLarge) {\n\t\t\tfor (let i=pieces.length; i--; ) {\n\t\t\t\tpieces[i] = '\\n' + indentChar + indent(pieces[i], indentChar);\n\t\t\t}\n\t\t}\n\t\tif (pieces.length) {\n\t\t\ts += pieces.join('');\n\t\t}\n\t\telse if (opts && opts.xml) {\n\t\t\treturn s.substring(0, s.length-1) + ' />';\n\t\t}\n\t}\n\n\tif (VOID_ELEMENTS.indexOf(nodeName)===-1) {\n\t\tif (pretty && ~s.indexOf('\\n')) s += '\\n';\n\t\ts += `</${nodeName}>`;\n\t}\n\n\treturn s;\n}\n\nfunction getComponentName(component) {\n\treturn component.displayName || component!==Function && component.name || getFallbackComponentName(component);\n}\n\nfunction getFallbackComponentName(component) {\n\tlet str = Function.prototype.toString.call(component),\n\t\tname = (str.match(/^\\s*function\\s+([^\\( ]+)/) || EMPTY)[1];\n\tif (!name) {\n\t\t// search for an existing indexed name for the given component:\n\t\tlet index = -1;\n\t\tfor (let i=UNNAMED.length; i--; ) {\n\t\t\tif (UNNAMED[i]===component) {\n\t\t\t\tindex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t// not found, create a new indexed name:\n\t\tif (index<0) {\n\t\t\tindex = UNNAMED.push(component) - 1;\n\t\t}\n\t\tname = `UnnamedComponent${index}`;\n\t}\n\treturn name;\n}\nrenderToString.shallowRender = shallowRender;\n\n\nexport {\n\trenderToString as render,\n\trenderToString,\n\tshallowRender\n};\n"],"names":["NON_DIMENSION_PROPS","boxFlexGroup","columnCount","fillOpacity","flex","flexGrow","flexShrink","flexNegative","fontWeight","lineClamp","lineHeight","order","orphans","strokeOpacity","widows","zIndex","zoom","ESC","objectKeys","Object","keys","i","obj","hasOwnProperty","push","encodeEntities","String","s","replace","escapeChar","a","falsey","v","memoize","fn","mem","indent","char","isLargeString","length","ignoreLines","indexOf","styleObjToCss","str","prop","val","jsToCss","undefined","hashToClassName","c","toLowerCase","assign","props","getNodeProps","vnode","defaultProps","nodeName","attributes","children","SHALLOW","shallow","UNNAMED","EMPTY","VOID_ELEMENTS","renderToString","render","shallowRender","context","opts","inner","isSvgMode","isComponent","pretty","indentChar","renderRootComponent","getComponentName","rendered","prototype","_disable","__x","componentWillMount","state","getChildContext","shallowHighOrder","html","attrs","sortAttributes","sort","name","allAttributes","match","hooked","attributeHook","__html","xml","sub","len","pieces","hasLarge","child","childSvgMode","ret","join","substring","component","displayName","Function","getFallbackComponentName","toString","call","index"],"mappings":"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"}