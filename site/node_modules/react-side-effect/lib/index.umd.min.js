!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):e.withSideEffect=t(e.React)}(this,function(e){"use strict";var t="default"in e?e.default:e;var n,o=(function(e){var t,n;t=!("undefined"==typeof window||!window.document||!window.document.createElement),n={canUseDOM:t,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:t&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:t&&!!window.screen},e.exports?e.exports=n:window.ExecutionEnvironment=n}(n={exports:{}},n.exports),n.exports),r=function(e,t,n,o){var r=n?n.call(o,e,t):void 0;if(void 0!==r)return!!r;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),c=Object.keys(t);if(i.length!==c.length)return!1;for(var f=Object.prototype.hasOwnProperty.bind(t),p=0;p<i.length;p++){var u=i[p];if(!f(u))return!1;var a=e[u],s=t[u];if(!1===(r=n?n.call(o,a,s,u):void 0)||void 0===r&&a!==s)return!1}return!0};return function(n,i,c){if("function"!=typeof n)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof i)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==c&&"function"!=typeof c)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(f){if("function"!=typeof f)throw new Error("Expected WrappedComponent to be a React component.");var p=[],u=void 0;function a(){u=n(p.map(function(e){return e.props})),s.canUseDOM?i(u):c&&(u=c(u))}var s=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),n.peek=function(){return u},n.rewind=function(){if(n.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=u;return u=void 0,p=[],e},n.prototype.shouldComponentUpdate=function(e){return!r(e,this.props)},n.prototype.componentWillMount=function(){p.push(this),a()},n.prototype.componentDidUpdate=function(){a()},n.prototype.componentWillUnmount=function(){var e=p.indexOf(this);p.splice(e,1),a()},n.prototype.render=function(){return t.createElement(f,this.props)},n}(e.Component);return s.displayName="SideEffect("+function(e){return e.displayName||e.name||"Component"}(f)+")",s.canUseDOM=o.canUseDOM,s}}});
